.include "macro.S"

.text
.globl rswitch_to
rswitch_to:
	sd   ra, 0(a0)
	addi t1, a0, 4
	sd	x1, 0x0(t1)
	sd	x2, 1 * REGBYTES(t1)
	sd	x3, 2 * REGBYTES(t1)
	sd	x4, 3 * REGBYTES(t1)
	sd	x5, 4 * REGBYTES(t1)
	sd	x6, 5 * REGBYTES(t1)
	sd	x7, 6 * REGBYTES(t1)
	sd	x8, 7 * REGBYTES(t1)
	sd	x9, 8 * REGBYTES(t1)
	sd	x10, 9 * REGBYTES(t1)
	sd	x11, 10 * REGBYTES(t1)
	sd	x12, 11 * REGBYTES(t1)
	sd	x13, 12 * REGBYTES(t1)
	sd	x14, 13 * REGBYTES(t1)
	sd	x15, 14 * REGBYTES(t1)
	sd	x16, 15 * REGBYTES(t1)
	sd	x17, 16 * REGBYTES(t1)
	sd	x18, 17 * REGBYTES(t1)
	sd	x19, 18 * REGBYTES(t1)
	sd	x20, 19 * REGBYTES(t1)
	sd	x21, 20 * REGBYTES(t1)
	sd	x22, 21 * REGBYTES(t1)
	sd	x23, 22 * REGBYTES(t1)
	sd	x24, 23 * REGBYTES(t1)
	sd	x25, 24 * REGBYTES(t1)
	sd	x26, 25 * REGBYTES(t1)
	sd	x27, 26 * REGBYTES(t1)
	sd	x28, 27 * REGBYTES(t1)
	sd	x29, 28 * REGBYTES(t1)
	sd	x30, 29 * REGBYTES(t1)
	sd	x31, 30 * REGBYTES(t1)

	la    ra, 0(a1)
	addi t1, a1, 4

	la	x2, 1 * REGBYTES(t1)
	la	x3, 2 * REGBYTES(t1)
	la	x4, 3 * REGBYTES(t1)
	la	x5, 4 * REGBYTES(t1)

	la	x7, 6 * REGBYTES(t1)
	la	x8, 7 * REGBYTES(t1)
	la	x9, 8 * REGBYTES(t1)
	la	x10, 9 * REGBYTES(t1)
	la	x11, 10 * REGBYTES(t1)
	la	x12, 11 * REGBYTES(t1)
	la	x13, 12 * REGBYTES(t1)
	la	x14, 13 * REGBYTES(t1)
	la	x15, 14 * REGBYTES(t1)
	la	x16, 15 * REGBYTES(t1)
	la	x17, 16 * REGBYTES(t1)
	la	x18, 17 * REGBYTES(t1)
	la	x19, 18 * REGBYTES(t1)
	la	x20, 19 * REGBYTES(t1)
	la	x21, 20 * REGBYTES(t1)
	la	x22, 21 * REGBYTES(t1)
	la	x23, 22 * REGBYTES(t1)
	la	x24, 23 * REGBYTES(t1)
	la	x25, 24 * REGBYTES(t1)
	la	x26, 25 * REGBYTES(t1)
	la	x27, 26 * REGBYTES(t1)
	la	x28, 27 * REGBYTES(t1)
	la	x29, 28 * REGBYTES(t1)
	la	x30, 29 * REGBYTES(t1)
	la	x31, 30 * REGBYTES(t1)

	ret
